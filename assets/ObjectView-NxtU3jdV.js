import{d as w,l as N,c as e,a as s,b as n,g as t,t as o,n as O,i as R,_ as M,j as V,u as F,F as x,k as T,e as I,f as $,w as L,h as S}from"./index-Vf8o3Wxc.js";import{D as P,_ as z,a as J,f as q,T as G,M as H}from"./tradition-button-0tdS1PP4.js";import{a as C,u as E}from"./transaction-card.vue_vue_type_style_index_0_lang-yrDwWSiK.js";const K={class:"transaction-container"},Q={class:"tradition-card__text-content text-content"},U={class:"text-content__title"},W={class:"text-content__subtitle"},X={class:"tradition-card__arrow"},Y={key:0,src:z},Z={key:1,src:J},tt={class:"tradition-card__transaction-info transaction-info"},et={key:0,class:"transaction-sub-container"},st={class:"transaction_sub-title"},at={class:"transaction_sub-title"},nt={class:"transaction_sub-title"},ot=w({__name:"transaction-card",props:{transaction:{}},setup(b){const c=b,v=C(),m=P.fromJSDate(c.transaction.date),_=N(!1),d=e(()=>v.getMode),h=e(()=>m.toFormat("dd.LL.yyyy")),g=e(()=>c.transaction.author?`от: ${c.transaction.author}`:null),j=e(()=>c.transaction.comment?`комментарий: ${c.transaction.comment}`:null),a=e(()=>q(c.transaction.count));return(i,l)=>(s(),n("div",{class:O(["transaction",{active:_.value}]),onClick:l[0]||(l[0]=u=>_.value=!_.value)},[t("div",K,[t("div",Q,[t("div",U,o(i.transaction.title),1),t("div",W,o(i.transaction.comment),1)]),t("div",X,[d.value==="receipts"?(s(),n("img",Y)):(s(),n("img",Z))]),t("div",tt,[t("span",{class:O(["transaction-info__subtitle",d.value])},o(a.value),3)])]),_.value?(s(),n("div",et,[t("div",st,o(h.value),1),t("div",at,o(g.value),1),t("div",nt,o(j.value),1)])):R("",!0)],2))}}),ct={};function it(b,c){return s(),n("div",null,"Тут документики будут")}const lt=M(ct,[["render",it]]),rt={};function _t(b,c){return s(),n("div",null,"Тут инфа")}const ut=M(rt,[["render",_t]]),dt={class:"transaction-container"},pt={class:"budget"},vt={class:"budget__title"},mt={class:"budget__sum"},ft={class:"budget__sum__receipts"},bt={class:"budget__sum__expenses"},ht={key:0,class:"transactions-container"},jt={class:"transactions-block__title"},yt={key:1,class:"empty__transactions"},$t=w({__name:"object-transactions",props:{allExpenses:{},allReceipts:{}},setup(b){const c=b,v=V(),m=E(),_=C(),d=e(()=>_.getMode),h=e(()=>v.params.projectID),g=e(()=>v.params.objectID),j=e(()=>m.getObjectsTransactions(h.value,g.value,d.value)),a=e(()=>j.value?j.value.reduce((i,l)=>{const u=new Date(l.date),f=new Date;if(u.toDateString()===f.toDateString()){const y=i.find(D=>D.title==="Сегодня");y?y.items.push(l):i.push({title:"Сегодня",items:[l]})}else{const y=Math.abs(f.getTime()-u.getTime());if(Math.ceil(y/(1e3*60*60*24))===1){const r=i.find(p=>p.title==="Вчера");r?r.items.push(l):i.push({title:"Вчера",items:[l]})}else i.push({title:l.date.toString(),items:[l]})}return i},[]):null);return F(),(i,l)=>(s(),n("div",dt,[t("div",pt,[t("div",vt,o(i.$t("transaction.object_budget")),1),t("div",mt,[t("span",ft,o(c.allExpenses)+" / ",1),t("span",bt,o(c.allReceipts),1)])]),a.value?(s(),n("div",ht,[(s(!0),n(x,null,T(a.value,u=>(s(),n("div",{key:`${u.title}_transaction`},[t("div",jt,o(u.title),1),(s(!0),n(x,null,T(u.items,f=>(s(),n("div",{key:`${f.title}_transaction`},[I($(ot),{transaction:f},null,8,["transaction"])]))),128))]))),128))])):(s(),n("div",yt,o(i.$t("transaction.empty_transaction")),1))]))}}),gt=M($t,[["__scopeId","data-v-96aff3f3"]]),Dt={class:"object-container"},kt={class:"object__menu"},xt=["onClick"],Mt=w({__name:"ObjectView",setup(b){const c=V(),v=E(),m=C(),_=e(()=>m.getMode),d=e(()=>m.getObjectMode),h=e(()=>c.params.projectID),g=e(()=>c.params.objectID),j=e(()=>v.getProjectById(h.value)),a=e(()=>v.getObjectById(h.value,g.value)),i=e(()=>{var r,p;return(r=a.value)!=null&&r.expenses_all?(p=a.value)==null?void 0:p.expenses_all:0}),l=e(()=>{var r,p;return(r=a.value)!=null&&r.receipts_all?(p=a.value)==null?void 0:p.receipts_all:0}),u=e(()=>a.value?_.value==="expenses"?a.value.expenses_today:a.value.receipts_today:0),f=e(()=>a.value?_.value==="expenses"?a.value.expenses_all:a.value.receipts_all:0),y=["transactions","information","docs"],D=r=>{m.setObjectMode(r)};return(r,p)=>{var A,B;return s(),n(x,null,[I($(G),{class:"main-button",link:"/create/transaction"},{default:L(()=>[t("span",null,o(r.$t("objects.create_transaction")),1)]),_:1}),t("div",Dt,[t("h1",null,o((A=a.value)==null?void 0:A.title),1),t("h3",null,o((B=j.value)==null?void 0:B.title),1),I($(H),{"today-amount":u.value,"all-amount":f.value},null,8,["today-amount","all-amount"]),t("div",kt,[(s(),n(x,null,T(y,k=>t("button",{class:O(["object__menu__option",{active:d.value===k}]),key:`${k}_option`,onClick:St=>D(k)},o(r.$t(`objects.${k}`)),11,xt)),64))]),d.value==="transactions"?(s(),S($(gt),{key:0,"all-expenses":i.value,"all-receipts":l.value},null,8,["all-expenses","all-receipts"])):d.value==="information"?(s(),S($(ut),{key:1})):(s(),S($(lt),{key:2}))])],64)}}}),wt=M(Mt,[["__scopeId","data-v-86ea9a42"]]);export{wt as default};
